-- MySQL Script generated by MySQL Workbench
-- 11/03/14 00:08:57
-- Model: New Model    Version: 1.0
-- MySQL Workbench Forward Engineering

CREATE DATABASE IF NOT EXISTS centrodesaude;

SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0;
SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0;
SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='TRADITIONAL,ALLOW_INVALID_DATES';

-- -----------------------------------------------------
-- Schema mydb
-- -----------------------------------------------------

-- -----------------------------------------------------
-- Schema mydb
-- -----------------------------------------------------
CREATE SCHEMA IF NOT EXISTS `mydb` DEFAULT CHARACTER SET utf8 COLLATE utf8_general_ci ;
USE `mydb` ;

-- -----------------------------------------------------
-- Table `mydb`.`Utente`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `mydb`.`Utente` ;

CREATE TABLE IF NOT EXISTS `mydb`.`Utente` (
  `n_BI` INT(8) NOT NULL,
  `n_Utente` INT(9) NOT NULL,
  `Nome` VARCHAR(1024) NOT NULL,
  `NIF` INT(9) NOT NULL,
  `Data_Nascimento` VARCHAR(45) NOT NULL,
  `n_Telemovel` INT(9) NOT NULL,
  `Email` VARCHAR(1024) NULL,
  `Morada` VARCHAR(1024) NOT NULL,
  `Cod_Postal` VARCHAR(1024) NOT NULL,
  `Localidade` VARCHAR(1024) NOT NULL,
  `Sexo` VARCHAR(10) NOT NULL,
  PRIMARY KEY (`n_BI`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`Medico`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `mydb`.`Medico` ;

CREATE TABLE IF NOT EXISTS `mydb`.`Medico` (
  `n_BI` INT(8) NOT NULL,
  `Nome` VARCHAR(1024) NOT NULL,
  `Data_Nascimento` VARCHAR(45) NOT NULL,
  `n_Telemovel` INT(9) NOT NULL,
  `Email` VARCHAR(1024) NOT NULL,
  `Morada` VARCHAR(1024) NOT NULL,
  `Cod_Postal` VARCHAR(1024) NOT NULL,
  `Localidade` VARCHAR(1024) NOT NULL,
  `Sexo` VARCHAR(10) NOT NULL,
  `password` VARCHAR(45) NOT NULL,
  `hora_entrada` VARCHAR(10) NOT NULL,
  `hora_saida` VARCHAR(10) NOT NULL,
  PRIMARY KEY (`n_BI`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`Enfermeiro`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `mydb`.`Enfermeiro` ;

CREATE TABLE IF NOT EXISTS `mydb`.`Enfermeiro` (
  `n_BI` INT(8) NOT NULL,
  `Nome` VARCHAR(1024) NOT NULL,
  `Data_Nascimento` VARCHAR(45) NOT NULL,
  `n_Telemovel` INT(9) NOT NULL,
  `Email` VARCHAR(1024) NOT NULL,
  `Morada` VARCHAR(1024) NOT NULL,
  `Cod_Postal` VARCHAR(1024) NOT NULL,
  `Localidade` VARCHAR(1024) NOT NULL,
  `Sexo` VARCHAR(10) NOT NULL,
  `password` VARCHAR(45) NOT NULL,
  `hora_entrada` VARCHAR(10) NOT NULL,
  `hora_saida` VARCHAR(10) NOT NULL,
  PRIMARY KEY (`n_BI`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`Funcionario`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `mydb`.`Funcionario` ;

CREATE TABLE IF NOT EXISTS `mydb`.`Funcionario` (
  `n_BI` INT(8) NOT NULL,
  `Nome` VARCHAR(1024) NOT NULL,
  `Data_Nascimento` VARCHAR(45) NOT NULL,
  `n_Telemovel` INT(9) NOT NULL,
  `Email` VARCHAR(1024) NOT NULL,
  `Morada` VARCHAR(1024) NOT NULL,
  `Cod_Postal` VARCHAR(1024) NOT NULL,
  `Localidade` VARCHAR(1024) NOT NULL,
  `Sexo` VARCHAR(10) NOT NULL,
  `password` VARCHAR(45) NOT NULL,
  `hora_entrada` VARCHAR(10) NOT NULL,
  `hora_saida` VARCHAR(10) NOT NULL,
  PRIMARY KEY (`n_BI`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`Historico_utente`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `mydb`.`Historico_utente` ;

CREATE TABLE IF NOT EXISTS `mydb`.`Historico_utente` (
  `n_Historico` INT NOT NULL AUTO_INCREMENT,
  `Uten_n_bi` INT(8) NOT NULL,
  `Med_n_bi` INT(8) NOT NULL,
  `Enf_n_BI` INT(8) NOT NULL,
  `Func_n_BI` INT(8) NOT NULL,
  `Ultima_consulta` VARCHAR(45) NULL,
  `Informacoes_importantes` VARCHAR(1024) NULL,
  PRIMARY KEY (`n_Historico`),
  INDEX `n_BI_idx` (`Med_n_bi` ASC),
  INDEX `n_BI_idx1` (`Enf_n_BI` ASC),
  INDEX `n_BI_idx2` (`Uten_n_bi` ASC),
  INDEX `n_BI_idx3` (`Func_n_BI` ASC),

    FOREIGN KEY (`Med_n_bi`)
    REFERENCES `mydb`.`Medico` (`n_BI`)
    ON DELETE CASCADE
    ON UPDATE CASCADE,
  
    FOREIGN KEY (`Enf_n_BI`)
    REFERENCES `mydb`.`Enfermeiro` (`n_BI`)
    ON DELETE CASCADE
    ON UPDATE CASCADE,

    FOREIGN KEY (`Uten_n_bi`)
    REFERENCES `mydb`.`Utente` (`n_BI`)
    ON DELETE CASCADE
    ON UPDATE CASCADE,
 
    FOREIGN KEY (`Func_n_BI`)
    REFERENCES `mydb`.`Funcionario` (`n_BI`)
    ON DELETE CASCADE
    ON UPDATE CASCADE)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`Consulta`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `mydb`.`Consulta` ;

CREATE TABLE IF NOT EXISTS `mydb`.`Consulta` (
  `n_Consulta` INT NOT NULL AUTO_INCREMENT,
  `Tipo` VARCHAR(45) NOT NULL,
  `Uten_n_BI` INT(8) NOT NULL,
  `Func_n_BI` INT(8) NOT NULL,
  `Med_n_BI` INT(8) NOT NULL,
  `Enf_n_BI` INT(8) NOT NULL,
  `Data` VARCHAR(45) NULL,
  `Hora` VARCHAR(10) NULL,
  `Observacoes` VARCHAR(1024) NULL,
  PRIMARY KEY (`n_Consulta`),
  INDEX `n_BI_idx` (`Func_n_BI` ASC),
  INDEX `n_BI_idx1` (`Uten_n_BI` ASC),
  INDEX `n_BI_idx2` (`Med_n_BI` ASC),
  INDEX `n_BI_idx3` (`Enf_n_BI` ASC),

    FOREIGN KEY (`Func_n_BI`)
    REFERENCES `mydb`.`Funcionario` (`n_BI`)
    ON DELETE CASCADE
    ON UPDATE CASCADE,
 
    FOREIGN KEY (`Uten_n_BI`)
    REFERENCES `mydb`.`Utente` (`n_BI`)
    ON DELETE CASCADE
    ON UPDATE CASCADE,
 
    FOREIGN KEY (`Med_n_BI`)
    REFERENCES `mydb`.`Medico` (`n_BI`)
    ON DELETE CASCADE
    ON UPDATE CASCADE,

    FOREIGN KEY (`Enf_n_BI`)
    REFERENCES `mydb`.`Enfermeiro` (`n_BI`)
    ON DELETE CASCADE
    ON UPDATE CASCADE)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`Registo_Clinico`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `mydb`.`Registo_Clinico` ;

CREATE TABLE IF NOT EXISTS `mydb`.`Registo_Clinico` (
  `n_Reg_Clinico` INT NOT NULL AUTO_INCREMENT,
  `Data_registo` DATE NOT NULL,
  `Med_n_BI` INT(8) NOT NULL,
  `Uten_n_BI` INT(8) NOT NULL,
  `Exame_rotina` VARCHAR(1024) NULL,
  `Exame_especial` VARCHAR(1024) NULL,
  `Descricao` VARCHAR(1024) NULL,
  `Observacao` VARCHAR(1024) NULL,
  PRIMARY KEY (`n_Reg_Clinico`),
  INDEX `n_BI_idx` (`Med_n_BI` ASC),
  INDEX `n_BI_idx1` (`Uten_n_BI` ASC),
 
    FOREIGN KEY (`Med_n_BI`)
    REFERENCES `mydb`.`Medico` (`n_BI`)
   ON DELETE CASCADE
    ON UPDATE CASCADE,

    FOREIGN KEY (`Uten_n_BI`)
    REFERENCES `mydb`.`Utente` (`n_BI`)
    ON DELETE CASCADE
    ON UPDATE CASCADE)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`Registo_Enfermagem`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `mydb`.`Registo_Enfermagem` ;

CREATE TABLE IF NOT EXISTS `mydb`.`Registo_Enfermagem` (
  `n_Reg_Enf` INT NOT NULL AUTO_INCREMENT,
  `Enf_n_BI` INT(8) NOT NULL,
  `Uten_n_BI` INT(8) NOT NULL,
  `Data_realizacao` VARCHAR(45) NOT NULL,
  `Peso (kg)` VARCHAR(10) NULL,
  `Altura (m)` VARCHAR(10) NULL,
  `Proxima_vacina` VARCHAR(45) NULL,
  `Data_proxima_vacina` VARCHAR(45) NULL,
  PRIMARY KEY (`n_Reg_Enf`),
  INDEX `n_BI_idx` (`Enf_n_BI` ASC),
  INDEX `n_BI_idx1` (`Uten_n_BI` ASC),

    FOREIGN KEY (`Enf_n_BI`)
    REFERENCES `mydb`.`Enfermeiro` (`n_BI`)
    ON DELETE CASCADE
    ON UPDATE CASCADE,

    FOREIGN KEY (`Uten_n_BI`)
    REFERENCES `mydb`.`Utente` (`n_BI`)
    ON DELETE CASCADE
    ON UPDATE CASCADE)
ENGINE = InnoDB;


SET SQL_MODE=@OLD_SQL_MODE;
SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS;
SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS;

-- -----------------------------------------------------
-- Data for table `mydb`.`Utente`
-- -----------------------------------------------------
START TRANSACTION;
USE `mydb`;
INSERT INTO `mydb`.`Utente` (`n_BI`, `n_Utente`, `Nome`, `NIF`, `Data_Nascimento`, `n_Telemovel`, `Email`, `Morada`, `Cod_Postal`, `Localidade`, `Sexo`) VALUES (14568236, 747655326, 'Yuri Rastikov', 236951248, '1970-06-06', 225556265, NULL, 'Avenida D.Joao III, n234, 6ºC', '7563-658', 'Bemposta', 'M');
INSERT INTO `mydb`.`Utente` (`n_BI`, `n_Utente`, `Nome`, `NIF`, `Data_Nascimento`, `n_Telemovel`, `Email`, `Morada`, `Cod_Postal`, `Localidade`, `Sexo`) VALUES (14548356, 365397578, 'Andreia Marques', 236584668, '1996-02-08', 918236466, 'andreiazita_96@hotmail.com', 'Rua da Vindima, n456', '8563-269', 'Samoa', 'F');
INSERT INTO `mydb`.`Utente` (`n_BI`, `n_Utente`, `Nome`, `NIF`, `Data_Nascimento`, `n_Telemovel`, `Email`, `Morada`, `Cod_Postal`, `Localidade`, `Sexo`) VALUES (13632963, 865875743, 'Filomena Arnado', 224252163, '1969-12-06', 236422289, NULL, 'Rua do Ourico, n198', '1236-523', 'Aldeia de Baixo', 'F');

COMMIT;


-- -----------------------------------------------------
-- Data for table `mydb`.`Medico`
-- -----------------------------------------------------
START TRANSACTION;
USE `mydb`;
INSERT INTO `mydb`.`Medico` (`n_BI`, `Nome`, `Data_Nascimento`, `n_Telemovel`, `Email`, `Morada`, `Cod_Postal`, `Localidade`, `Sexo`, `password`, `hora_entrada`, `hora_saida`) VALUES (14631975, 'Tania Baia', '1994-06-07', 916664861, 'taniafbr@hotmail.com', 'Rua de Alvalade, n10, Pedralva', '3780-177', 'Anadia', 'F', 'medico', '09:00', '19:00');
INSERT INTO `mydb`.`Medico` (`n_BI`, `Nome`, `Data_Nascimento`, `n_Telemovel`, `Email`, `Morada`, `Cod_Postal`, `Localidade`, `Sexo`, `password`, `hora_entrada`, `hora_saida`) VALUES (14365418, 'Nuno Pinheiro', '1993-02-04', 919236192, 'nunohenrique_nh@hotmail.com', 'Rua Fundo da Gandra, n273A, 1ºesq', '3730-255', 'Vale de Cambra', 'M', 'medico', '09:00', '19:00');
INSERT INTO `mydb`.`Medico` (`n_BI`, `Nome`, `Data_Nascimento`, `n_Telemovel`, `Email`, `Morada`, `Cod_Postal`, `Localidade`, `Sexo`, `password`, `hora_entrada`, `hora_saida`) VALUES (14430026, 'Catarina Oliveira', '1993-12-22', 913432355, 'papoilaverdealface@hotmail.com', 'Rua da Manga, n251', '4515-152', 'Ferreirinha, Foz do Sousa', 'F', 'medico', '09:00', '19:00');

COMMIT;


-- -----------------------------------------------------
-- Data for table `mydb`.`Enfermeiro`
-- -----------------------------------------------------
START TRANSACTION;
USE `mydb`;
INSERT INTO `mydb`.`Enfermeiro` (`n_BI`, `Nome`, `Data_Nascimento`, `n_Telemovel`, `Email`, `Morada`, `Cod_Postal`, `Localidade`, `Sexo`, `password`, `hora_entrada`, `hora_saida`) VALUES (14479826, 'Francisca Pereira', '1995-09-06', 914160596, 'francisca.franciscota@gmail.com', 'Rua das Portas Verdes, lote8, 2ºC', '2430-309', 'Marinha Grande', 'F', 'enfermeiro', '09:00', '19:00');
INSERT INTO `mydb`.`Enfermeiro` (`n_BI`, `Nome`, `Data_Nascimento`, `n_Telemovel`, `Email`, `Morada`, `Cod_Postal`, `Localidade`, `Sexo`, `password`, `hora_entrada`, `hora_saida`) VALUES (14508746, 'António Ribeiro', '1980-10-07', 964328795, 'antonioribeirinho@hotmail.com', 'Rua do Vale das Flores, n234', '2596-133', 'Coimbra', 'M', 'enfermeiro', '09:00', '19:00');
INSERT INTO `mydb`.`Enfermeiro` (`n_BI`, `Nome`, `Data_Nascimento`, `n_Telemovel`, `Email`, `Morada`, `Cod_Postal`, `Localidade`, `Sexo`, `password`, `hora_entrada`, `hora_saida`) VALUES (13678934, 'Marta Fonseca', '1975-05-24', 935687214, 'martaf345@gmail.com', 'Rua da Porta, n987, 2ºDir', '1200-587', 'Oeiras', 'F', 'enfermeiro', '09:00', '19:00');

COMMIT;


-- -----------------------------------------------------
-- Data for table `mydb`.`Funcionario`
-- -----------------------------------------------------
START TRANSACTION;
USE `mydb`;
INSERT INTO `mydb`.`Funcionario` (`n_BI`, `Nome`, `Data_Nascimento`, `n_Telemovel`, `Email`, `Morada`, `Cod_Postal`, `Localidade`, `Sexo`, `password`, `hora_entrada`, `hora_saida`) VALUES (14236758, 'Julio Carneiro', '1977-03-02', 918523587, 'j.carneirinho@hotmail.com', 'Rua da Tapecaria, n80, 3ºC', '3890-234', 'S.J.Madeira', 'M', 'funcionario', '08:00', '20:00');
INSERT INTO `mydb`.`Funcionario` (`n_BI`, `Nome`, `Data_Nascimento`, `n_Telemovel`, `Email`, `Morada`, `Cod_Postal`, `Localidade`, `Sexo`, `password`, `hora_entrada`, `hora_saida`) VALUES (13695247, 'Rute Henriques', '1989-11-10', 935687142, 'rute_henrique35@gmail.com', 'Avenida Camilo de Matos, n347, 4ºesq', '3730-256', 'Vale de Cambra', 'F', 'funcionario', '08:00', '20:00');
INSERT INTO `mydb`.`Funcionario` (`n_BI`, `Nome`, `Data_Nascimento`, `n_Telemovel`, `Email`, `Morada`, `Cod_Postal`, `Localidade`, `Sexo`, `password`, `hora_entrada`, `hora_saida`) VALUES (15896324, 'Marco Tavares', '1985-07-15', 963254125, 'marco_tv_456@gmail.com', 'Rua Marques, n123', '5069-875', 'Ameal', 'M', 'funcionario', '08:00', '20:00');

COMMIT;


-- -----------------------------------------------------
-- Data for table `mydb`.`Historico_utente`
-- -----------------------------------------------------
START TRANSACTION;
USE `mydb`;
INSERT INTO `mydb`.`Historico_utente` (`n_Historico`, `Uten_n_bi`, `Med_n_bi`, `Enf_n_BI`, `Func_n_BI`, `Ultima_consulta`, `Informacoes_importantes`) VALUES (1, 13632963, 14430026, 14508746, 15896324, '2013-01-22', 'braquicardias recorrentes');
INSERT INTO `mydb`.`Historico_utente` (`n_Historico`, `Uten_n_bi`, `Med_n_bi`, `Enf_n_BI`, `Func_n_BI`, `Ultima_consulta`, `Informacoes_importantes`) VALUES (2, 14548356, 14365418, 14508746, 13695247, '2013-11-05', 'corte profundo por cima da unha do dedo indicador da mao direita');
INSERT INTO `mydb`.`Historico_utente` (`n_Historico`, `Uten_n_bi`, `Med_n_bi`, `Enf_n_BI`, `Func_n_BI`, `Ultima_consulta`, `Informacoes_importantes`) VALUES (3, 14568236, 14631975, 14508746, 14236758, '2014-09-12', 'tem cataratas (necessita de operar nos dois olhos)');

COMMIT;


-- -----------------------------------------------------
-- Data for table `mydb`.`Consulta`
-- -----------------------------------------------------
START TRANSACTION;
USE `mydb`;
INSERT INTO `mydb`.`Consulta` (`n_Consulta`, `Tipo`, `Uten_n_BI`, `Func_n_BI`, `Med_n_BI`, `Enf_n_BI`, `Data`, `Hora`, `Observacoes`) VALUES (1, 'Verificar analises', 14568236, 14236758, 14631975, 14479826, '2014-11-22', '09:30', 'Verificar se operacoes as cataratas podem avancar');
INSERT INTO `mydb`.`Consulta` (`n_Consulta`, `Tipo`, `Uten_n_BI`, `Func_n_BI`, `Med_n_BI`, `Enf_n_BI`, `Data`, `Hora`, `Observacoes`) VALUES (2, 'Medicina Geral', 13632963, 13695247, 14365418, 14479826, '2015-01-14', '15:15', 'Verificar arritmias (braquicardias)');
INSERT INTO `mydb`.`Consulta` (`n_Consulta`, `Tipo`, `Uten_n_BI`, `Func_n_BI`, `Med_n_BI`, `Enf_n_BI`, `Data`, `Hora`, `Observacoes`) VALUES (3, 'Vacinacao', 14548356, 15896324, 14430026, 14479826, '2015-02-20 ', '16:15', 'tetano');

COMMIT;


-- -----------------------------------------------------
-- Data for table `mydb`.`Registo_Clinico`
-- -----------------------------------------------------
START TRANSACTION;
USE `mydb`;
INSERT INTO `mydb`.`Registo_Clinico` (`n_Reg_Clinico`, `Data_registo`, `Med_n_BI`, `Uten_n_BI`, `Exame_rotina`, `Exame_especial`, `Descricao`, `Observacao`) VALUES (1, '2013-01-22', 14430026, 13632963, NULL, 'Electrocardiograma', 'Exame fisico com incidencia no ritmo cardiaco', 'Paciente estava estavel, mas tem historico de arritmias');
INSERT INTO `mydb`.`Registo_Clinico` (`n_Reg_Clinico`, `Data_registo`, `Med_n_BI`, `Uten_n_BI`, `Exame_rotina`, `Exame_especial`, `Descricao`, `Observacao`) VALUES (2, '2014-09-12', 14631975, 14568236, 'Analises Clinicas', NULL, 'Consulta Medicina Geral', 'Identificadas cataratas (paciente aparenta necessitar de operacao em ambos os olhos)');

COMMIT;


-- -----------------------------------------------------
-- Data for table `mydb`.`Registo_Enfermagem`
-- -----------------------------------------------------
START TRANSACTION;
USE `mydb`;
INSERT INTO `mydb`.`Registo_Enfermagem` (`n_Reg_Enf`, `Enf_n_BI`, `Uten_n_BI`, `Data_realizacao`, `Peso (kg)`, `Altura (m)`, `Proxima_vacina`, `Data_proxima_vacina`) VALUES (1, 14508746, 14548356, '2013-11-05', '55.00', '1.60', 'tetano', '2015-02-20');

COMMIT;

